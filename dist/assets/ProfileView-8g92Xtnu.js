import{_ as p,c as i,a as s,b as a,w as n,v as d,t as m,d as h,e as b,f as c,g,o as l}from"./index-DakpfGzX.js";const f={data(){return{email:"",password:"",username:"",age:"",gender:"",birthday:"",bio:"",errors:{password:"",username:"",age:"",gender:"",birthday:"",bio:"",general:""}}},methods:{async submitUpdate(o){o.preventDefault(),this.validate(),Object.keys(this.errors).length===0&&this.sendRequest()},validate(){this.errors={},this.password||(this.errors.password="Password is required."),this.password.length<8&&(this.errors.password="The password must be at least 8 characters."),this.username?this.username.length<5&&(this.errors.username="Username must be at least 5 characters."):this.errors.username="Username is required.",this.age?this.age<18?this.errors.age="You must be at least 18 years old.":this.age>200&&(this.errors.age="You must be less than 200 years old."):this.errors.age="Age is required.",bio.length>200&&(this.errors.bio="Bio must be less than 200 characters.")},async sendRequest(){try{const e=await(await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`${localStorage.getItem("token")}`},body:JSON.stringify({password:this.password,username:this.username,age:this.age,gender:this.gender,birthday:this.birthday,bio:this.bio})})).json();alert(e.message)}catch(o){console.log(o)}},async deleteAccount(){try{const e=await(await fetch("/api/user/profile",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`${localStorage.getItem("token")}`}})).json();alert(e.message),this.$router.push("/login")}catch(o){console.log(o)}}},async mounted(){try{const e=await(await fetch("/api/user/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`${localStorage.getItem("token")}`}})).json();this.email=e.email,this.password=e.password,this.username=e.username,this.age=e.age,this.gender=e.gender,this.birthday=new Date(e.birthday).toISOString().split("T")[0],this.bio=e.bio}catch(o){console.log(o)}}},y={class:"container mt-5"},w={class:"row justify-content-center"},v={class:"col-md-8"},_={class:"card"},U={class:"card-body"},k={class:"text-center mb-4"},x={key:0,src:b,class:"rounded-circle mb-2",alt:"User Profile",width:"150",height:"150"},E={key:1,src:c,class:"rounded-circle mb-2",alt:"User Profile",width:"150",height:"150"},S={key:2,src:g,class:"rounded-circle mb-2",alt:"User Profile",width:"150",height:"150"},V={class:"mb-3"},T={class:"mb-3"},j={key:0,class:"text-danger"},q={class:"mb-3"},A={key:0,class:"text-danger"},P={class:"mb-3"},B={key:0,class:"text-danger"},C={class:"mb-3"},D={key:0,class:"text-danger"},I={class:"mb-3"},O={key:0,class:"text-danger"},z={class:"mb-3"},M={key:0,class:"text-danger"};function N(o,e,G,R,r,u){return l(),i("div",y,[s("div",w,[s("div",v,[e[18]||(e[18]=s("h2",{class:"text-center mb-4"},"Edit Profile",-1)),s("div",_,[s("div",U,[s("div",k,[r.gender=="male"?(l(),i("img",x)):a("",!0),r.gender=="female"?(l(),i("img",E)):a("",!0),r.gender=="other"?(l(),i("img",S)):a("",!0)]),s("form",{onSubmit:e[7]||(e[7]=(...t)=>u.submitUpdate&&u.submitUpdate(...t))},[s("div",V,[e[9]||(e[9]=s("label",{for:"email",class:"form-label"},"Email Address",-1)),n(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.email=t),type:"email",class:"form-control",id:"email",placeholder:"Enter your email",disabled:""},null,512),[[d,r.email]])]),s("div",T,[e[10]||(e[10]=s("label",{for:"password",class:"form-label"},"Password",-1)),n(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.password=t),type:"password",class:"form-control",id:"password",placeholder:"Enter your password",required:""},null,512),[[d,r.password]]),r.errors.password?(l(),i("p",j,m(r.errors.password),1)):a("",!0)]),s("div",q,[e[11]||(e[11]=s("label",{for:"username",class:"form-label"},"Username",-1)),n(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>r.username=t),type:"text",class:"form-control",id:"username",placeholder:"Enter your username",required:""},null,512),[[d,r.username]]),r.errors.username?(l(),i("p",A,m(r.errors.username),1)):a("",!0)]),s("div",P,[e[12]||(e[12]=s("label",{for:"age",class:"form-label"},"Age",-1)),n(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>r.age=t),type:"number",class:"form-control",id:"age",placeholder:"Enter your age",required:""},null,512),[[d,r.age]]),r.errors.age?(l(),i("p",B,m(r.errors.age),1)):a("",!0)]),s("div",C,[e[14]||(e[14]=s("label",{for:"gender",class:"form-label"},"Gender",-1)),n(s("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>r.gender=t),class:"form-select",id:"gender"},e[13]||(e[13]=[s("option",{selected:"",value:""},"Select your gender",-1),s("option",{value:"male"},"Male",-1),s("option",{value:"female"},"Female",-1),s("option",{value:"other"},"Other",-1)]),512),[[h,r.gender]]),r.errors.gender?(l(),i("p",D,m(r.errors.gender),1)):a("",!0)]),s("div",I,[e[15]||(e[15]=s("label",{for:"birthday",class:"form-label"},"Birthday",-1)),n(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>r.birthday=t),type:"date",class:"form-control",id:"birthday"},null,512),[[d,r.birthday]]),r.errors.birthday?(l(),i("p",O,m(r.errors.birthday),1)):a("",!0)]),s("div",z,[e[16]||(e[16]=s("label",{for:"bio",class:"form-label"},"Bio",-1)),n(s("textarea",{"onUpdate:modelValue":e[6]||(e[6]=t=>r.bio=t),class:"form-control",id:"bio",rows:"3",placeholder:"Write something about yourself..."},null,512),[[d,r.bio]]),r.errors.bio?(l(),i("p",M,m(r.errors.bio),1)):a("",!0)]),e[17]||(e[17]=s("button",{type:"submit",class:"btn btn-primary w-100 mb-1"},"Save Changes",-1))],32),s("button",{onClick:e[8]||(e[8]=t=>u.deleteAccount()),class:"btn btn-danger w-100"},"Delete account")])])])])])}const F=p(f,[["render",N]]);export{F as default};
