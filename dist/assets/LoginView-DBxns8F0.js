import{_ as c,c as n,a as s,w as l,v as p,t as a,b as d,h as f,i as b,j as g,r as h,o as i,k as w}from"./index-DakpfGzX.js";const I="/assets/auth-banner-DDWP50Rb.png",v={data(){return{emailInput:"",passwordInput:"",rememberMe:!0,errors:{emailInput:"",passwordInput:"",general:""}}},methods:{async loginSubmit(r){if(r.preventDefault(),this.validate(),Object.keys(this.errors).length===0)await this.sendRequest();else return!1},validate(){this.errors={},this.emailInput?/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(this.emailInput)||(this.errors.emailInput="Invalid email address"):this.errors.emailInput="Email is required",this.passwordInput?this.passwordInput.length<8&&(this.errors.passwordInput="The password must be at least 8 characters"):this.errors.passwordInput="Password is required"},async sendRequest(){try{const r=await fetch("/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.emailInput,password:this.passwordInput})}),e=await r.json();r.ok?(console.log(e),localStorage.setItem("token",e.token),this.$emit("authenticated",!0),this.$router.push("/")):this.errors.general=e.message}catch(r){console.log(r)}}}},x={class:"container py-5 h-100"},y={class:"row d-flex align-items-center justify-content-center h-100"},k={class:"col-md-7 col-lg-5 col-xl-5 offset-xl-1"},_={"data-mdb-input-init":"",class:"form-outline mb-4"},S={key:0,class:"text-danger"},V={"data-mdb-input-init":"",class:"form-outline mb-4"},M={key:0,class:"text-danger"},j={class:"d-flex justify-content-around align-items-center mb-4"},R={class:"form-check"},C={key:0,class:"text-danger"};function D(r,e,N,P,t,m){const u=h("router-link");return i(),n("section",null,[s("div",x,[s("div",y,[e[11]||(e[11]=s("div",{class:"col-md-8 col-lg-7 col-xl-6"},[s("img",{src:I,class:"img-fluid",alt:"Phone image"})],-1)),s("div",k,[s("form",{onSubmit:e[3]||(e[3]=(...o)=>m.loginSubmit&&m.loginSubmit(...o))},[s("div",_,[e[4]||(e[4]=s("label",{class:"form-label",for:"emailInput"},"Email address:",-1)),l(s("input",{type:"email",id:"emailInput",class:"form-control form-control-lg","onUpdate:modelValue":e[0]||(e[0]=o=>t.emailInput=o)},null,512),[[p,t.emailInput]]),t.errors.emailInput?(i(),n("p",S,a(t.errors.emailInput),1)):d("",!0)]),s("div",V,[e[5]||(e[5]=s("label",{class:"form-label",for:"passwordInput"},"Password:",-1)),l(s("input",{type:"password",id:"passwordInput",class:"form-control form-control-lg","onUpdate:modelValue":e[1]||(e[1]=o=>t.passwordInput=o)},null,512),[[p,t.passwordInput]]),t.errors.passwordInput?(i(),n("p",M,a(t.errors.passwordInput),1)):d("",!0)]),s("div",j,[s("div",R,[l(s("input",{class:"form-check-input",type:"checkbox",value:"",id:"rememberMe","onUpdate:modelValue":e[2]||(e[2]=o=>t.rememberMe=o),checked:""},null,512),[[f,t.rememberMe]]),e[6]||(e[6]=s("label",{class:"form-check-label",for:"rememberMe"}," Remember me ",-1))]),e[7]||(e[7]=s("a",{href:"#!"},"Forgot password?",-1))]),t.errors.general?(i(),n("p",C,a(t.errors.general),1)):d("",!0),e[9]||(e[9]=s("button",{type:"submit","data-mdb-button-init":"","data-mdb-ripple-init":"",class:"btn btn-primary btn-lg btn-block"}," Sign in ",-1)),e[10]||(e[10]=s("div",{class:"divider d-flex align-items-center my-4"},[s("p",{class:"text-center fw-bold mx-3 mb-0 text-muted"},"OR")],-1)),b(u,{to:"/register",class:"fs-5"},{default:g(()=>e[8]||(e[8]=[w(" Register ")])),_:1})],32)])])])])}const q=c(v,[["render",D]]);export{q as default};
