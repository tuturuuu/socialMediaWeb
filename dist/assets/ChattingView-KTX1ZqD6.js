import{c as n,b as o,a as i,n as h,d as l,F as m,l as p,m as g,r as c,o as e,N as w,j as f,g as C,t as _,h as b}from"./index-DwsF5HMj.js";const v={class:"row"},k={class:"col-md-4 col-lg-3 border-end d-md-flex flex-column"},y={key:0,class:"alert alert-warning text-center",role:"alert"},$={class:"list-group overflow-auto"},N={class:"mb-0"},V={data(){return{showContacts:!0,rooms:[]}},unmounted(){this.$store.commit("setIsChattingView",!1)},async mounted(){Notification.requestPermission(),this.$store.commit("setIsChattingView",!0);try{const t=await(await fetch("/api/room/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}})).json();this.rooms=t}catch(r){console.log(r)}this.rooms.length>0&&this.$router.push(`/chatting/room/${this.rooms[0].name}/${this.rooms[0]._id}`)}},j=Object.assign(V,{__name:"ChattingView",setup(r){return(t,s)=>{const u=c("router-link"),d=c("router-view");return e(),n(m,null,[o("div",v,[i(w),o("div",k,[s[3]||(s[3]=o("h4",{class:"text-center py-3"},"Contacts",-1)),o("button",{class:"btn btn-primary d-md-none d-block mx-auto mb-3",onClick:s[0]||(s[0]=a=>t.showContacts=!t.showContacts)},[o("i",{class:h(["bi",{"bi-arrow-bar-up":t.showContacts,"bi-arrow-bar-down":!t.showContacts}])},null,2)]),t.rooms.length===0?(e(),n("div",y," You haven't followed any users yet. Go to the posts page and follow users to start chatting. ")):l("",!0),t.showContacts&&t.rooms.length>0?(e(!0),n(m,{key:1},p(t.rooms,a=>(e(),n("div",$,[i(u,{to:`/chatting/room/${a.name}/${a._id}`,class:"list-group-item list-group-item-action d-flex align-items-center"},{default:f(()=>[s[2]||(s[2]=o("img",{src:C,width:"40",height:"40",class:"rounded-circle me-3",alt:"User"},null,-1)),o("div",null,[o("h6",N,_(a.name),1),s[1]||(s[1]=o("small",{class:"text-muted"},"Last message snippet...",-1))])]),_:2},1032,["to"])]))),256)):l("",!0)]),(e(),g(d,{key:t.$route.fullPath}))]),i(b)],64)}}});export{j as default};
