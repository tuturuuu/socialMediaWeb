import{c as a,a as u,b as r,d as l,w as n,v as d,t as m,e as p,F as h,_ as b,f as g,g as f,o as i,N as y,h as c}from"./index-yck-UKCz.js";const w={class:"container mt-5"},v={class:"row justify-content-center"},U={class:"col-md-8"},k={class:"card"},E={class:"card-body"},S={class:"text-center mb-4"},V={key:0,src:b,class:"rounded-circle mb-2",alt:"User Profile",width:"150",height:"150"},j={key:1,src:g,class:"rounded-circle mb-2",alt:"User Profile",width:"150",height:"150"},T={key:2,src:f,class:"rounded-circle mb-2",alt:"User Profile",width:"150",height:"150"},q={class:"mb-3"},A={class:"mb-3"},P={key:0,class:"text-danger"},B={class:"mb-3"},C={key:0,class:"text-danger"},D={class:"mb-3"},N={key:0,class:"text-danger"},O={class:"mb-3"},$={key:0,class:"text-danger"},F={class:"mb-3"},I={key:0,class:"text-danger"},z={class:"mb-3"},M={key:0,class:"text-danger"},G={data(){return{email:"",password:"",username:"",age:"",gender:"",birthday:"",bio:"",errors:{password:"",username:"",age:"",gender:"",birthday:"",bio:"",general:""}}},methods:{async submitUpdate(o){o.preventDefault(),this.validate(),Object.keys(this.errors).length===0&&this.sendRequest()},validate(){this.errors={},this.password||(this.errors.password="Password is required."),this.password.length<8&&(this.errors.password="The password must be at least 8 characters."),this.username?this.username.length<5&&(this.errors.username="Username must be at least 5 characters."):this.errors.username="Username is required.",this.age?this.age<18?this.errors.age="You must be at least 18 years old.":this.age>200&&(this.errors.age="You must be less than 200 years old."):this.errors.age="Age is required.",bio.length>200&&(this.errors.bio="Bio must be less than 200 characters.")},async sendRequest(){try{const e=await(await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`${localStorage.getItem("token")}`},body:JSON.stringify({password:this.password,username:this.username,age:this.age,gender:this.gender,birthday:this.birthday,bio:this.bio})})).json();alert(e.message)}catch(o){console.log(o)}},async deleteAccount(){try{const e=await(await fetch("/api/user/profile",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`${localStorage.getItem("token")}`}})).json();alert(e.message),this.$router.push("/login")}catch(o){console.log(o)}}},async mounted(){try{const e=await(await fetch("/api/user/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`${localStorage.getItem("token")}`}})).json();this.email=e.email,this.password=e.password,this.username=e.username,this.age=e.age,this.gender=e.gender,this.birthday=new Date(e.birthday).toISOString().split("T")[0],this.bio=e.bio}catch(o){console.log(o)}}},Y=Object.assign(G,{__name:"ProfileView",setup(o){return(e,s)=>(i(),a(h,null,[u(y),r("div",w,[r("div",v,[r("div",U,[s[18]||(s[18]=r("h2",{class:"text-center mb-4"},"Edit Profile",-1)),r("div",k,[r("div",E,[r("div",S,[e.gender=="male"?(i(),a("img",V)):l("",!0),e.gender=="female"?(i(),a("img",j)):l("",!0),e.gender=="other"?(i(),a("img",T)):l("",!0)]),r("form",{onSubmit:s[7]||(s[7]=(...t)=>e.submitUpdate&&e.submitUpdate(...t))},[r("div",q,[s[9]||(s[9]=r("label",{for:"email",class:"form-label"},"Email Address",-1)),n(r("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>e.email=t),type:"email",class:"form-control",id:"email",placeholder:"Enter your email",disabled:""},null,512),[[d,e.email]])]),r("div",A,[s[10]||(s[10]=r("label",{for:"password",class:"form-label"},"Password",-1)),n(r("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>e.password=t),type:"password",class:"form-control",id:"password",placeholder:"Enter your password",required:""},null,512),[[d,e.password]]),e.errors.password?(i(),a("p",P,m(e.errors.password),1)):l("",!0)]),r("div",B,[s[11]||(s[11]=r("label",{for:"username",class:"form-label"},"Username",-1)),n(r("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>e.username=t),type:"text",class:"form-control",id:"username",placeholder:"Enter your username",required:""},null,512),[[d,e.username]]),e.errors.username?(i(),a("p",C,m(e.errors.username),1)):l("",!0)]),r("div",D,[s[12]||(s[12]=r("label",{for:"age",class:"form-label"},"Age",-1)),n(r("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>e.age=t),type:"number",class:"form-control",id:"age",placeholder:"Enter your age",required:""},null,512),[[d,e.age]]),e.errors.age?(i(),a("p",N,m(e.errors.age),1)):l("",!0)]),r("div",O,[s[14]||(s[14]=r("label",{for:"gender",class:"form-label"},"Gender",-1)),n(r("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>e.gender=t),class:"form-select",id:"gender"},s[13]||(s[13]=[r("option",{selected:"",value:""},"Select your gender",-1),r("option",{value:"male"},"Male",-1),r("option",{value:"female"},"Female",-1),r("option",{value:"other"},"Other",-1)]),512),[[p,e.gender]]),e.errors.gender?(i(),a("p",$,m(e.errors.gender),1)):l("",!0)]),r("div",F,[s[15]||(s[15]=r("label",{for:"birthday",class:"form-label"},"Birthday",-1)),n(r("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>e.birthday=t),type:"date",class:"form-control",id:"birthday"},null,512),[[d,e.birthday]]),e.errors.birthday?(i(),a("p",I,m(e.errors.birthday),1)):l("",!0)]),r("div",z,[s[16]||(s[16]=r("label",{for:"bio",class:"form-label"},"Bio",-1)),n(r("textarea",{"onUpdate:modelValue":s[6]||(s[6]=t=>e.bio=t),class:"form-control",id:"bio",rows:"3",placeholder:"Write something about yourself..."},null,512),[[d,e.bio]]),e.errors.bio?(i(),a("p",M,m(e.errors.bio),1)):l("",!0)]),s[17]||(s[17]=r("button",{type:"submit",class:"btn btn-primary w-100 mb-1"},"Save Changes",-1))],32),r("button",{onClick:s[8]||(s[8]=t=>e.deleteAccount()),class:"btn btn-danger w-100"},"Delete account")])])])])]),u(c)],64))}});export{Y as default};
