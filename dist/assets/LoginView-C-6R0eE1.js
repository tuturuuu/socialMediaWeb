import{c as a,b as s,w as i,v as m,t as l,d,i as b,a as p,j as f,F as g,r as c,o as n,k as h,h as w}from"./index-yck-UKCz.js";const I="/assets/auth-banner-DDWP50Rb.png",v={class:"container py-5 h-100"},y={class:"row d-flex align-items-center justify-content-center h-100"},k={class:"col-md-7 col-lg-5 col-xl-5 offset-xl-1"},S={"data-mdb-input-init":"",class:"form-outline mb-4"},V={key:0,class:"text-danger"},j={"data-mdb-input-init":"",class:"form-outline mb-4"},M={key:0,class:"text-danger"},R={class:"d-flex justify-content-around align-items-center mb-4"},x={class:"form-check"},C={key:0,class:"text-danger"},D={emits:["authenticated"],data(){return{emailInput:"",passwordInput:"",rememberMe:!0,errors:{emailInput:"",passwordInput:"",general:""}}},methods:{async loginSubmit(r){if(r.preventDefault(),this.validate(),Object.keys(this.errors).length===0)await this.sendRequest();else return!1},validate(){this.errors={},this.emailInput?/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(this.emailInput)||(this.errors.emailInput="Invalid email address"):this.errors.emailInput="Email is required",this.passwordInput?this.passwordInput.length<8&&(this.errors.passwordInput="The password must be at least 8 characters"):this.errors.passwordInput="Password is required"},async sendRequest(){try{const r=await fetch("/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.emailInput,password:this.passwordInput})}),t=await r.json();r.ok?(localStorage.setItem("token",t.token),this.$emit("authenticated"),this.$router.push("/")):this.errors.general=t.message}catch(r){console.log(r)}}}},O=Object.assign(D,{__name:"LoginView",setup(r){return(t,e)=>{const u=c("router-link");return n(),a(g,null,[s("section",null,[s("div",v,[s("div",y,[e[11]||(e[11]=s("div",{class:"col-md-8 col-lg-7 col-xl-6"},[s("img",{src:I,class:"img-fluid",alt:"Phone image"})],-1)),s("div",k,[s("form",{onSubmit:e[3]||(e[3]=(...o)=>t.loginSubmit&&t.loginSubmit(...o))},[s("div",S,[e[4]||(e[4]=s("label",{class:"form-label",for:"emailInput"},"Email address:",-1)),i(s("input",{type:"email",id:"emailInput",class:"form-control form-control-lg","onUpdate:modelValue":e[0]||(e[0]=o=>t.emailInput=o)},null,512),[[m,t.emailInput]]),t.errors.emailInput?(n(),a("p",V,l(t.errors.emailInput),1)):d("",!0)]),s("div",j,[e[5]||(e[5]=s("label",{class:"form-label",for:"passwordInput"},"Password:",-1)),i(s("input",{type:"password",id:"passwordInput",class:"form-control form-control-lg","onUpdate:modelValue":e[1]||(e[1]=o=>t.passwordInput=o)},null,512),[[m,t.passwordInput]]),t.errors.passwordInput?(n(),a("p",M,l(t.errors.passwordInput),1)):d("",!0)]),s("div",R,[s("div",x,[i(s("input",{class:"form-check-input",type:"checkbox",value:"",id:"rememberMe","onUpdate:modelValue":e[2]||(e[2]=o=>t.rememberMe=o),checked:""},null,512),[[b,t.rememberMe]]),e[6]||(e[6]=s("label",{class:"form-check-label",for:"rememberMe"}," Remember me ",-1))]),e[7]||(e[7]=s("a",{href:"#!"},"Forgot password?",-1))]),t.errors.general?(n(),a("p",C,l(t.errors.general),1)):d("",!0),e[9]||(e[9]=s("button",{type:"submit","data-mdb-button-init":"","data-mdb-ripple-init":"",class:"btn btn-primary btn-lg btn-block"}," Sign in ",-1)),e[10]||(e[10]=s("div",{class:"divider d-flex align-items-center my-4"},[s("p",{class:"text-center fw-bold mx-3 mb-0 text-muted"},"OR")],-1)),p(u,{to:"/register",class:"fs-5"},{default:f(()=>e[8]||(e[8]=[h(" Register ")])),_:1})],32)])])])]),p(w)],64)}}});export{O as default};
