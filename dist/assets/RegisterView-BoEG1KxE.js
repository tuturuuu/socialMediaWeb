import{c as a,b as s,t as l,d as n,w as d,v as m,k as u,a as p,j as g,F as b,r as w,o as i,h}from"./index-DwsF5HMj.js";const c="/assets/citizen-removebg-Cbovnf5o.png",y={class:"container py-5 h-100"},v={class:"row d-flex align-items-center justify-content-center h-100"},P={class:"col-md-7 col-lg-5 col-xl-5 offset-xl-1"},k={class:"card"},I={class:"card-body p-5"},V={key:0,class:"text-danger"},j={"data-mdb-input-init":"",class:"form-outline mb-4"},U={key:0,class:"text-danger"},q={"data-mdb-input-init":"",class:"form-outline mb-4"},S={key:0,class:"text-danger"},C={"data-mdb-input-init":"",class:"form-outline mb-4"},R={key:0,class:"text-danger"},A={"data-mdb-input-init":"",class:"form-outline mb-4"},N={key:0,class:"text-danger"},T={"data-mdb-input-init":"",class:"form-outline mb-4"},z={key:0,class:"text-danger"},O={class:"text-center text-muted mt-5 mb-0"},B={data(){return{username:"",email:"",age:"",password:"",repeatPassword:"",errors:{username:"",email:"",age:"",password:"",repeatPassword:"",general:""}}},methods:{async registerSubmit(o){if(o.preventDefault(),this.validateInput(o),Object.keys(this.errors).length===0)await this.sendRequest();else return!1},validateInput(){this.errors={},this.username?this.username.length<5&&(this.errors.username="Username must be at least 5 characters"):this.errors.username="Username is required",this.email?/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/.test(this.email)||(this.errors.email="Invalid email address"):this.errors.email="Email is required",this.age?this.age<18?this.errors.age="You must be at least 18 years old":this.age>200&&(this.errors.age="You must be at most 200"):this.errors.age="Age is required",this.password?this.password.length<8&&(this.errors.password="The password must be at least 8 characters"):this.errors.password="Password is required",this.repeatPassword?this.password!==this.repeatPassword&&(this.errors.repeatPassword="Passwords do not match"):this.errors.repeatPassword="Repeat Password is required"},async sendRequest(){try{const o=await fetch("/api/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,email:this.email,age:this.age,password:this.password})}),r=await o.json();o.ok?this.$router.push("/login"):this.errors.general=r.message}catch(o){console.log(o)}}}},E=Object.assign(B,{__name:"RegisterView",setup(o){return(r,e)=>{const f=w("router-link");return i(),a(b,null,[s("section",null,[s("div",y,[s("div",v,[e[16]||(e[16]=s("div",{class:"col-md-8 col-lg-7 col-xl-6"},[s("img",{src:c,class:"img-fluid",alt:"Phone image"})],-1)),s("div",P,[s("div",k,[s("div",I,[e[15]||(e[15]=s("h2",{class:"text-uppercase text-center mb-5 text-primary"},"Create an account",-1)),r.errors.general?(i(),a("p",V,l(r.errors.general),1)):n("",!0),s("form",{onSubmit:e[5]||(e[5]=(...t)=>r.registerSubmit&&r.registerSubmit(...t))},[s("div",j,[e[6]||(e[6]=s("label",{class:"form-label",for:"usernameInput"},"Username:",-1)),d(s("input",{type:"text",id:"usernameInput",class:"form-control form-control-lg","onUpdate:modelValue":e[0]||(e[0]=t=>r.username=t)},null,512),[[m,r.username]]),r.errors.username?(i(),a("p",U,l(r.errors.username),1)):n("",!0)]),s("div",q,[e[7]||(e[7]=s("label",{class:"form-label",for:"emailInput"},"Email:",-1)),d(s("input",{type:"email",id:"emailInput",class:"form-control form-control-lg","onUpdate:modelValue":e[1]||(e[1]=t=>r.email=t)},null,512),[[m,r.email]]),r.errors.email?(i(),a("p",S,l(r.errors.email),1)):n("",!0)]),s("div",C,[e[8]||(e[8]=s("label",{class:"form-label",for:"ageInput"},"Age:",-1)),d(s("input",{type:"number",id:"ageInput",class:"form-control form-control-lg","onUpdate:modelValue":e[2]||(e[2]=t=>r.age=t)},null,512),[[m,r.age]]),r.errors.age?(i(),a("p",R,l(r.errors.age),1)):n("",!0)]),s("div",A,[e[9]||(e[9]=s("label",{class:"form-label",for:"passwordInput"},"Password:",-1)),d(s("input",{type:"password",id:"passwordInput",class:"form-control form-control-lg","onUpdate:modelValue":e[3]||(e[3]=t=>r.password=t)},null,512),[[m,r.password]]),r.errors.password?(i(),a("p",N,l(r.errors.password),1)):n("",!0)]),s("div",T,[e[10]||(e[10]=s("label",{class:"form-label",for:"repeatPasswordInput"},"Repeat your password:",-1)),d(s("input",{type:"password",id:"repeatPasswordInput",class:"form-control form-control-lg","onUpdate:modelValue":e[4]||(e[4]=t=>r.repeatPassword=t)},null,512),[[m,r.repeatPassword]]),r.errors.repeatPassword?(i(),a("p",z,l(r.errors.repeatPassword),1)):n("",!0)]),e[13]||(e[13]=s("div",{class:"form-check d-flex justify-content-center"},null,-1)),e[14]||(e[14]=s("div",{class:"d-flex justify-content-center"},[s("input",{type:"submit",value:"Register","data-mdb-button-init":"","data-mdb-ripple-init":"",class:"btn btn-primary btn-lg btn-block"})],-1)),s("p",O,[e[12]||(e[12]=u(" Have already an account? ")),p(f,{to:"/login",class:"fw-bold"},{default:g(()=>e[11]||(e[11]=[u(" Login here ")])),_:1})])],32)])])])])])]),p(h)],64)}}});export{E as default};
